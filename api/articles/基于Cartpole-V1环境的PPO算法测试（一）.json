{"title":"基于Cartpole-V1环境的PPO算法测试（一）","uid":"12987721cc33fd056d0c65501beff720","slug":"基于Cartpole-V1环境的PPO算法测试（一）","date":"2023-02-28T02:29:37.000Z","updated":"2023-02-28T05:16:12.000Z","comments":true,"path":"api/articles/基于Cartpole-V1环境的PPO算法测试（一）.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/strange-id/img@master/202302281031890.png","content":"<h1 id=\"摘要\"><a href=\"#摘要\" class=\"headerlink\" title=\"摘要\"></a>摘要</h1><p>学长说要用CartPole练练手，找找调参的感觉。现在感觉毕设好像真的做不完了。</p>\n<h1 id=\"建立环境\"><a href=\"#建立环境\" class=\"headerlink\" title=\"建立环境\"></a>建立环境</h1><p>网上很多教程都是CartPole-V0相关的，但是gym更新了V1，教程很少，bug很多。</p>\n<p>首先安装gym工具包：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">pip install gym<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>V0的代码：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> gym  <span class=\"token comment\">#调用</span>\nenv <span class=\"token operator\">=</span> gym<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">(</span><span class=\"token string\">'CartPole-v0'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建模型</span>\nenv<span class=\"token punctuation\">.</span>reset<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#初始化</span>\n<span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#玩1000个回合</span>\n    env<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#刷新当前环境并显示</span>\n    env<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">.</span>action_space<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 随机采样动作</span>\nenv<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#1000回合后游戏结束</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"gym的0-26-2版本下报错及解决方案\"><a href=\"#gym的0-26-2版本下报错及解决方案\" class=\"headerlink\" title=\"gym的0.26.2版本下报错及解决方案\"></a>gym的0.26.2版本下报错及解决方案</h2><h3 id=\"1-V0没了，改成V1\"><a href=\"#1-V0没了，改成V1\" class=\"headerlink\" title=\"1. V0没了，改成V1\"></a>1. V0没了，改成V1</h3><h3 id=\"2-设置render的模式\"><a href=\"#2-设置render的模式\" class=\"headerlink\" title=\"2. 设置render的模式\"></a>2. 设置render的模式</h3><p>有三种模式可以选择：human、rgb_array、ansi。human是用pygame显示玩游戏的画面；rgb_array是一个rgb数组；ansi不知道是什么。  </p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">env <span class=\"token operator\">=</span> gym<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">(</span><span class=\"token string\">'CartPole-v1'</span><span class=\"token punctuation\">,</span>render_mode<span class=\"token operator\">=</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>设置完还是会报错！</p>\n<h3 id=\"3-安装可能需要的包\"><a href=\"#3-安装可能需要的包\" class=\"headerlink\" title=\"3. 安装可能需要的包\"></a>3. 安装可能需要的包</h3><p>修改</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">pip install pyglet<span class=\"token operator\">==</span><span class=\"token number\">1.2</span><span class=\"token number\">.4</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>还是报错，发现没有安装<strong>pygame</strong>包</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">pip install pygame<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>安装完解决，终于看到这个摆了。（所以还是不知道这个pyglet的版本跟错误有没有关系）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/strange-id/img@master/202302281031890.png\"></p>\n<p>更改后代码：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> gym\nenv <span class=\"token operator\">=</span> gym<span class=\"token punctuation\">.</span>make<span class=\"token punctuation\">(</span><span class=\"token string\">'CartPole-v1'</span><span class=\"token punctuation\">,</span>render_mode<span class=\"token operator\">=</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">)</span>\nenv<span class=\"token punctuation\">.</span>reset<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    env<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    env<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">.</span>action_space<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># take a random action</span>\nenv<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","text":"摘要学长说要用CartPole练练手，找找调参的感觉。现在感觉毕设好像真的做不完了。 建立环境网上很多教程都是CartPole-V0相关的，但是gym更新了V1，教程很少，bug很多。 首先安装gym工具包： pip install gym V0的代码： import gym #...","link":"","photos":[],"count_time":{"symbolsCount":843,"symbolsTime":"1 mins."},"categories":[{"name":"学习记录","slug":"学习记录","count":12,"path":"api/categories/学习记录.json"}],"tags":[{"name":"强化学习","slug":"强化学习","count":3,"path":"api/tags/强化学习.json"},{"name":"PPO","slug":"PPO","count":2,"path":"api/tags/PPO.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%91%98%E8%A6%81\"><span class=\"toc-text\">摘要</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%BB%BA%E7%AB%8B%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">建立环境</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gym%E7%9A%840-26-2%E7%89%88%E6%9C%AC%E4%B8%8B%E6%8A%A5%E9%94%99%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">gym的0.26.2版本下报错及解决方案</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-V0%E6%B2%A1%E4%BA%86%EF%BC%8C%E6%94%B9%E6%88%90V1\"><span class=\"toc-text\">1. V0没了，改成V1</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E8%AE%BE%E7%BD%AErender%E7%9A%84%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">2. 设置render的模式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%AE%89%E8%A3%85%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E7%9A%84%E5%8C%85\"><span class=\"toc-text\">3. 安装可能需要的包</span></a></li></ol></li></ol></li></ol>","author":{"name":"这id好怪","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/strange-id/img@master/202302261337546.png","link":"/","description":"记录学业、生活、爱好","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"基于Cartpole-V1环境的PPO算法测试（二）","uid":"c9c4367659589c155ad018aba731abf7","slug":"基于Cartpole-V1环境的PPO算法测试（二）","date":"2023-03-01T08:36:13.000Z","updated":"2023-03-01T09:05:50.000Z","comments":true,"path":"api/articles/基于Cartpole-V1环境的PPO算法测试（二）.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/strange-id/img@master/202303011641323.png","text":"摘要昨天看到了倒立摆，今天用PPO训练了倒立摆，明天的目标是让训练结果可视化。 代码来源 该代码和我的环境不一样，所以有几个小问题。 代码环境（重要） 包 版本号 python 3.11 gym 0.26.2 numpy 1.23.5 keras 2.12.0rc1 tenson...","link":"","photos":[],"count_time":{"symbolsCount":"5.4k","symbolsTime":"5 mins."},"categories":[{"name":"学习记录","slug":"学习记录","count":12,"path":"api/categories/学习记录.json"}],"tags":[{"name":"强化学习","slug":"强化学习","count":3,"path":"api/tags/强化学习.json"},{"name":"PPO","slug":"PPO","count":2,"path":"api/tags/PPO.json"}],"author":{"name":"这id好怪","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/strange-id/img@master/202302261337546.png","link":"/","description":"记录学业、生活、爱好","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Streaming+直播录制","uid":"be8942e4a994dc307593e51a8f18db74","slug":"Streaming直播录制","date":"2023-02-25T14:40:47.000Z","updated":"2023-02-28T03:17:10.000Z","comments":true,"path":"api/articles/Streaming直播录制.json","keywords":null,"cover":null,"text":"少女歌剧revue starlight #4 climax舞台初日！眩しい！ Streaming+是什么？这是由eplus提供的付费门票制媒体流服务。很多日本舞台的直播都在eplus上卖，中国大陆人购票观看体验还是很不错的。 录制工具：Stream Recorder谷歌浏览器插件...","link":"","photos":[],"count_time":{"symbolsCount":485,"symbolsTime":"1 mins."},"categories":[{"name":"在坑底招手","slug":"在坑底招手","count":2,"path":"api/categories/在坑底招手.json"}],"tags":[{"name":"小技巧","slug":"小技巧","count":8,"path":"api/tags/小技巧.json"}],"author":{"name":"这id好怪","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/strange-id/img@master/202302261337546.png","link":"/","description":"记录学业、生活、爱好","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}